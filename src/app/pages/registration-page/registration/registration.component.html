<form
  [formGroup]="form"
  class="registration"
>
  <mat-card class="registration__wrapper">
    <img
      class="icon-user"
      src="../../../../assets/images/user-icon.svg"
      alt="user"
    />
    <span class="title">Sign Up</span>

    <mat-form-field class="registration__firstname">
      <mat-label>First name</mat-label>
      <input
        matInput
        formControlName="firstNameControl"
      />
      <mat-error
        *ngIf="form.get('firstNameControl').invalid && form.get('firstNameControl').touched"
      >
        <span *ngIf="form.get('firstNameControl').errors.required">Enter first name</span>
        <span *ngIf="form.get('firstNameControl').errors.pattern">
          Only numbers, letters, characters (3 - 15)
        </span>
      </mat-error>
    </mat-form-field>
    <mat-form-field class="registration__lastname">
      <mat-label>Last name</mat-label>
      <input
        matInput
        formControlName="lastNameControl"
      />
      <mat-error *ngIf="form.get('lastNameControl').invalid && form.get('lastNameControl').touched">
        <span *ngIf="form.get('lastNameControl').errors.required">Enter first name</span>
        <span *ngIf="form.get('lastNameControl').errors.pattern">
          Only numbers, letters, characters (3 - 15)
        </span>
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Gender</mat-label>
      <mat-select formControlName="sexControl">
        <mat-option
          *ngFor="let gender of genders"
          [value]="gender.value"
        >
          {{ gender.viewValue }}<mat-icon>{{ gender.value }}</mat-icon>
        </mat-option>
      </mat-select>
      <mat-error *ngIf="form.get('sexControl').invalid && form.get('sexControl').touched">
        <span *ngIf="form.get('sexControl').errors.required">Choose a gender</span>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="example-full-width">
      <mat-label>Email</mat-label>
      <input
        type="email"
        matInput
        formControlName="emailFormControl"
        placeholder="Ex. pat@example.com"
      />
      <mat-error
        *ngIf="form.get('emailFormControl').invalid && form.get('emailFormControl').touched"
      >
        <span *ngIf="form.get('emailFormControl').errors.required">Enter email</span>
        <span *ngIf="form.get('emailFormControl').errors.email">Input correct email</span>
        <span *ngIf="form.get('emailFormControl').errors.restricredEmail">
          Email {{form.get('emailFormControl').value}} already exists
        </span>
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Enter your password</mat-label>
      <input
        (input)="updateSubmitted()"
        formControlName="enterPassword"
        matInput
        [type]="isHidePassword ? 'password' : 'text'"
      />
      <button
        mat-icon-button
        matSuffix
        (click)="isHidePassword = !isHidePassword"
        [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="isHidePassword"
      >
        <mat-icon>{{ isHidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
      <mat-error *ngIf="form.get('enterPassword').invalid && form.get('enterPassword').touched">
        <span *ngIf="form.get('enterPassword').errors.required">Enter password</span>
        <span *ngIf="form.get('enterPassword').errors.pattern">
          One caps letter, > 8 , one number, one of !@#$%^&*
        </span>
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Repeat your password</mat-label>
      <input
        (input)="updateSubmitted()"
        formControlName="repeatPassword"
        matInput
        [type]="isHidePassword ? 'password' : 'text'"
      />
      <button
        mat-icon-button
        matSuffix
        (click)="isHidePassword = !isHidePassword"
        [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="isHidePassword"
      >
        <mat-icon>{{ isHidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
      <mat-error *ngIf="form.get('repeatPassword').invalid && form.get('repeatPassword').touched">
        <span *ngIf="form.get('repeatPassword').errors.required">Enter password</span>
        <span *ngIf="form.get('repeatPassword').errors.pattern">
          One caps letter, > 8 , one number, one of !@#$%^&*
        </span>
      </mat-error>
    </mat-form-field>
    <button
      (click)="sendForm()"
      [disabled]="form.invalid || isSubmitted"
      mat-raised-button
    >
      Sign Up
    </button>
    <mat-error
      class="isSubmitted"
      *ngIf="isSubmitted"
      >Passwords mismatch</mat-error
    >
  </mat-card>
</form>
<app-success-modal (onCloseModal)="closeModal($event)" [isLoading]="isLoading" *ngIf="isSendForm"></app-success-modal>
<app-footer></app-footer>
